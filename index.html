<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Memory Shares | Video Sharing</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
body { display:flex; min-height:100vh; background-color:#f5f7fa; color:#333; }

/* Sidebar */
.sidebar { width:220px; background:linear-gradient(135deg,#1a1a2e 0%,#16213e 100%); color:white; padding:25px 0; position:fixed; height:100vh; }
.logo { text-align:center; padding:0 20px 30px; border-bottom:1px solid rgba(255,255,255,0.2); margin-bottom:30px; }
.logo h1 { font-size:1.8rem; color:#e94560; }
.nav-links { list-style:none; padding:0 20px; }
.nav-links li { margin-bottom:15px; }
.nav-links a { display:flex; align-items:center; color:white; text-decoration:none; padding:12px 15px; border-radius:8px; transition:0.3s; }
.nav-links a:hover, .nav-links a.active { background-color: rgba(233,69,96,0.2); transform:translateX(5px); }
.nav-links i { margin-right:12px; font-size:1.2rem; }

/* Main Content */
.main-content { flex:1; margin-left:220px; padding:30px; }
.header { display:flex; justify-content:space-between; align-items:center; margin-bottom:30px; padding-bottom:20px; border-bottom:1px solid #e0e6ed; }
.header h2 { font-size:1.8rem; color:#2c3e50; }

/* Page Content */
.page-content { display:none; }
.page-content.active { display:block; }

/* Home Page */
#homeVideos { display:grid; grid-template-columns:repeat(4,1fr); gap:20px; }
.video-card { display:flex; flex-direction:column; gap:5px; }
.video-card video { width:100%; border-radius:10px; }
.video-title { font-weight:600; font-size:1rem; color:#2c3e50; }

/* Upload Page */
.upload-container { background:white; border-radius:10px; padding:30px; box-shadow:0 4px 6px rgba(0,0,0,0.05); max-width:600px; margin:0 auto; }
.upload-header { text-align:center; margin-bottom:20px; }
.upload-header h2 { color:#2c3e50; margin-bottom:10px; }
.upload-header p { color:#7f8c8d; }
#videoTitle { width:100%; padding:10px; margin-bottom:20px; border-radius:8px; border:1px solid #ccc; font-size:1rem; }
#fileInput { display:none; }
.upload-area { border:2px dashed #bdc3c7; border-radius:8px; padding:40px 20px; text-align:center; margin-bottom:20px; cursor:pointer; transition:0.3s; }
.upload-area.dragover { border-color:#e94560; background-color:#f8f9fa; }
.upload-btn { background:linear-gradient(135deg,#1a1a2e 0%,#16213e 100%); color:white; border:none; padding:12px 25px; border-radius:8px; font-size:1rem; cursor:pointer; width:100%; }
.upload-btn:hover { transform:translateY(-2px); box-shadow:0 5px 15px rgba(26,26,46,0.3); }

/* Toast */
#toast { position:fixed; top:20px; right:20px; background:#2ecc71; color:white; padding:12px 20px; border-radius:8px; display:none; z-index:999; }

/* Responsive */
@media(max-width:1024px){#homeVideos{grid-template-columns:repeat(2,1fr);}}
@media(max-width:768px){.sidebar{width:70px;}.logo h1,.nav-links span{display:none;}.main-content{margin-left:70px;}#homeVideos{grid-template-columns:1fr;}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

<!-- Sidebar -->
<div class="sidebar">
  <div class="logo"><h1>Memory Shares</h1></div>
  <ul class="nav-links">
    <li><a href="#" class="nav-link active" data-page="home"><i class="fas fa-home"></i><span>Home</span></a></li>
    <li><a href="#" class="nav-link" data-page="upload"><i class="fas fa-cloud-upload-alt"></i><span>Upload</span></a></li>
  </ul>
</div>

<!-- Main Content -->
<div class="main-content">
  <div class="header"><h2 id="page-title">Homepage</h2></div>

  <!-- Home Page -->
  <div id="home" class="page-content active">
    <div id="homeVideos"></div>
  </div>

  <!-- Upload Page -->
  <div id="upload" class="page-content">
    <div class="upload-container">
      <div class="upload-header">
        <h2>Upload Video</h2>
        <p>Drag & Drop or Click to Select Video</p>
      </div>
      <input type="text" id="videoTitle" placeholder="Enter a title for your video">
      <div class="upload-area" id="uploadArea">
        <h3>Select a video file</h3>
        <p>Supported formats: mp4, mov</p>
      </div>
      <input type="file" id="fileInput" accept="video/*">
      <button class="upload-btn" id="uploadBtn">Upload</button>
    </div>
  </div>
</div>

<!-- Toast -->
<div id="toast"></div>

<script>
  // --- Navigation ---
  document.querySelectorAll('.nav-link').forEach(link=>{
    link.addEventListener('click', e=>{
      e.preventDefault();
      document.querySelectorAll('.nav-link').forEach(l=>l.classList.remove('active'));
      link.classList.add('active');
      const pageId = link.getAttribute('data-page');
      document.querySelectorAll('.page-content').forEach(page=>page.classList.remove('active'));
      document.getElementById(pageId).classList.add('active');
      document.getElementById('page-title').textContent = pageId==='home'?'Homepage':'Upload Video';
    });
  });

  // --- Cloudinary Setup ---
  const cloudName = 'dfkh6wkyt';
  const unsignedUploadPreset = 'upload';

  const uploadArea = document.getElementById('uploadArea');
  const fileInput = document.getElementById('fileInput');
  const uploadBtn = document.getElementById('uploadBtn');
  const homeVideos = document.getElementById('homeVideos');
  const toast = document.getElementById('toast');
  const videoTitleInput = document.getElementById('videoTitle');

  uploadArea.addEventListener('click', ()=>fileInput.click());
  // Show confirmation immediately when user selects a file
fileInput.addEventListener('change', () => {
    if(fileInput.files[0]){
        showToast(`Video "${fileInput.files[0].name}" selected!`);
    }
});


  uploadBtn.addEventListener('click', ()=>{
    if(!fileInput.files[0]){
      showToast('Please select a video file', true);
      return;
    }
    uploadFile(fileInput.files[0]);
  });

  async function uploadFile(file){
    const url = `https://api.cloudinary.com/v1_1/${cloudName}/upload`;
    const formData = new FormData();
    formData.append('file', file);
    formData.append('upload_preset', unsignedUploadPreset);

    let titleText = videoTitleInput.value.trim();
    if(!titleText) titleText = "Untitled Video";

    try{
      const res = await fetch(url,{method:'POST',body:formData});
      const data = await res.json();

      const container = document.createElement('div');
      container.className = 'video-card';
      const vidTitle = document.createElement('div');
      vidTitle.className = 'video-title';
      vidTitle.textContent = titleText;

      const vid = document.createElement('video');
      vid.src = data.secure_url;
      vid.controls = true;

      container.appendChild(vidTitle);
      container.appendChild(vid);
      homeVideos.appendChild(container);

      showToast(`Video "${titleText}" uploaded successfully!`);
      videoTitleInput.value = '';
      fileInput.value = '';
    }catch(err){
      console.error(err);
      showToast('Upload failed. Please try again.', true);
    }
  }

  function showToast(message,isError=false){
    toast.textContent = message;
    toast.style.background = isError?'#e74c3c':'#2ecc71';
    toast.style.display = 'block';
    setTimeout(()=>{ toast.style.display='none'; },3000);
  }
</script>
</body>
</html>
